<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Exam</title>
</head>
<body onload="some_script();">
<script src="al.js"></script>
<input type='button' onClick='logout()' value='logout' /> 
<input type='button' onClick='script2()' value='Take Exam' />
<table>
<tr><td><div id='ExamQuestions'></div></td>
<td><div id='Results'></div></td>
<td><div id='scrollbar'></div></td>
</tr>
</table>
<div id='output' style="position: absolute;top:0; right:0"></div>
<script>
function some_script() {
    var r='Welcome ';
    
    document.getElementById('output').innerHTML= r+sessionStorage.getItem("name");
}
function script2() {
	var s='';
	 s+= '<h3>Questions</h3><ol>'
	for( var i = 0; i < Q.length; ++i){
    	s+='<li>'+Q[i].statement+'</li><br>';
    	s+='<ul>'
    	
    	for( var j=0;j<4;++j){
    		
    		s+='<input type="radio" name="q'+i+'" value='+Q[i].choices[j]+' id="q'+i+'"><label for="q1a">'+Q[i].choices[j]+'</label><br/>';
    		
    	}
    	s+='</ul>';
    	s+='<br><br>'
        
        }
	 s+='</ol>'
	 document.getElementById('ExamQuestions').innerHTML = s;
	 var button = document.createElement("button");
	 button.innerHTML = "Submit";

	 
	 var body = document.getElementsByTagName("body")[0];
	 body.appendChild(button);

	 
	 button.addEventListener ("click", function()
			 {
		         var s1='Results Published';
		         var score=0;
		         for(var j=0; j< Q.length; j++)
		        {
		         var answers = document.getElementsByName("q"+j);
		         

		         for(var i = 0; i < answers.length; i++) {
		        	 
		            if(answers[i].checked){
		            	
		            	if(answers[i].value==Q[j].answer){
		            		
		            		score=score+1;
		            	}
		            }
		                
		            
		          }
		        }
		         s1+='<br>Score:<br>'
		         s1+=score;
		         var string1=sessionStorage.getItem("name")+' scored '+score;
		         localStorage['mylist'] = JSON.stringify([]);
		         var mylist = JSON.parse(localStorage['mylist']);
		         mylist.push(string1);
		         console.log(string1);
		         localStorage['mylist'] = JSON.stringify(mylist);
		         
		         var updates='';
		         for(var i=0;i<scroll.length;i++)
		        	 {
		        	 updates+='\n'+scroll[i];
		        	 }
		         
		         document.getElementById('Results').innerHTML=s1;
		         document.getElementById('scrollbar').innerHTML=updates;
		         
		         // alert("did something");
			 }
	 );
	 
}
function CalculateResult() {
    alert('Result Calculated');
}

	
	
	
	




</script>

</body>
</html>