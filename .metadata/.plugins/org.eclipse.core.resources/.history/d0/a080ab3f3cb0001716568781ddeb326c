<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Test</title>
</head>
<body onload="somescript()">
<script src="al.js"></script>

<h1 style="background-color: #4CAF50;color:white;width:100%; padding: 25px; ">User Management</h1><div id='welcome' style="position: absolute;top:0; right:0"></div>
ID: <br/><input id='id'/><br/>
Password:<br/> <input id='pass' value='123'/><br/>
Name:<br/> <input id='name'/><br/>
Type:<br/><input id='type' value='student'><br/>
<input type='button' onClick='addUser()' value='add' />
<input type='button' onClick='removeUser()' value='remove' />
<div id="output"></div>





<script>
function somescript() {
    var r='Welcome Instructor ';
    var o1='<i>';
    var mylist = JSON.parse(localStorage['mylist']);
    for(var i=0;i<mylist.length;i++)
    	{
    	o1=o1+'&ensp;&ensp;&ensp;'+mylist[i];
    	}
    o1+='</i>'
    document.getElementById('mar').innerHTML= o1;
    document.getElementById('welcome').innerHTML= r+sessionStorage.getItem("name");
}


function addUser() {
	var s1=''
	getElement('output1').innerHTML=s1
	try {
		U.push({
		    id: getValue('id'),
		    password: getValue('pass'),
		    name: getValue('name'),
		    type: getValue('type'),
		  })
		  console.log(U);
	}
	catch(err) {
	    document.getElementById("output1").innerHTML = err.message;
	}
  
  store(function() {
	
	getElement('output1').innerHTML=s1
    retrieveAndDisplay()
  })
}

function removeUser() {
  U.pop()
  store(function() {
    retrieveAndDisplay()
  })
}
function addQuestion() {
	  Q.push({
	    statement: getValue('stmt'),
	    choices:[getValue('c1'),getValue('c2'),
	      getValue('c3'),getValue('c4')],
	    answer: getValue('ans')
	  })
	  store(function() {
	    retrieveAndDisplay()
	  })
	}

	function removeQuestion() {
	  Q.pop()
	  store(function() {
	    retrieveAndDisplay()
	  })
	}

	function retrieveAndDisplay() {
	  retrieve( function() {
	    var s = ''
	      s += '<h3>Users</h3><ol>'
	      try{
	      for( var i = 0; i < U.length; ++i ) 
	        s+='<li>' + U[i].name + '</li>'
	    //  s+= '</ol><h3>Questions</h3><ol>'
	    //  for( var i = 0; i < Q.length; ++i)
	    //	s+='<li>'+Q[i].statement+'</li>'
	    //  s+= '</ol>'
	      getElement('output').innerHTML = s}
	      catch(err){getElement('output1'.innerHTML='some error')}
	  })
	}

	retrieveAndDisplay()



</script>
</body>
</html>
